#!/bin/sh

WALLPAPER="$(cat "$HOME/.cache/current_wallpaper" 2>/dev/null)"
[ -f "$WALLPAPER" ] || exit 0

BRIGHTNESS=$(magick "$WALLPAPER" -colorspace gray -resize 1x1 txt:- \
  | awk -F '[(),]' '/gray/ {print int($4)}')

if [ "$BRIGHTNESS" -lt 120 ]; then
  BLUR=14
else
  BLUR=6
fi

swaymsg blur_radius "$BLUR" >/dev/null


swaymsg blur_radius "$BLUR" >/dev/null

